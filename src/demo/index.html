<!DOCTYPE html>
<html>

	<head>
		<title></title>
		<meta charset="utf-8">
		<style type="text/css">
			
		</style>
	</head>


	<body>

		<textarea id="input" rows="3" autofocus="true"></textarea>
		<textarea id="result" rows="3"></textarea>


		<script type="text/javascript" src="../js/wanakana.js"></script>		
		<script type="text/javascript">

			(function(wk) {

				var debounce = function(fn, delay) {

					var timeoutId,
						context = this;

					return function() {
						
						var args = Array.prototype.slice.call(arguments);

						function deferred() {
							timeoutId = null;
							fn.apply(context, args);
						}

						clearTimeout(timeoutId);
						timeoutId = setTimeout(deferred, delay);
					}

				}

				var textInput = document.getElementById('input');
				var textResult = document.getElementById('result');

				var change = debounce(function(e) {
					// change handler
					var buffer = textInput.value;
					textResult.value = (wk.toKana(buffer));
				}, 100);
				
				textInput.addEventListener('input', change);

			})(window.wanakana);

		</script>

	</body>

</html>